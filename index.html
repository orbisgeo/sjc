<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ORBIS TRIB - São José do Cerrito (LC 07/2006)</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        /* --- ESTILOS DA INTERFACE (SISTEMA) --- */
        body { font-family: 'Inter', system-ui, sans-serif; background-color: #f8fafc; color: #1e293b; }
        
        /* Toggle Switch */
        .toggle-checkbox:checked { right: 0; border-color: #4f46e5; }
        .toggle-checkbox:checked + .toggle-label { background-color: #4f46e5; }
        
        /* Inputs */
        .input-focus:focus { ring: 2px; ring-color: #6366f1; border-color: #6366f1; outline: none; }

        /* --- ESTILOS DO DOCUMENTO JURÍDICO (IMPRESSÃO) --- */
        .juridico-doc {
            font-family: 'Times New Roman', Times, serif;
            font-size: 12pt;
            line-height: 1.5;
            color: #000;
            text-align: justify;
            background: white;
            padding: 2.5cm 2cm 2cm 3cm; /* Margens ABNT/Oficial */
            max-width: 21cm;
            margin: 0 auto;
        }
        
        .juridico-header { text-align: center; margin-bottom: 30px; }
        .juridico-header img { width: 80px; margin-bottom: 10px; }
        .juridico-header h1 { font-size: 14pt; font-weight: bold; margin: 0; text-transform: uppercase; }
        .juridico-header p { font-size: 12pt; font-style: italic; margin: 0; }
        
        .ementa { margin-left: 8cm; margin-bottom: 25px; font-style: italic; font-size: 10pt; text-align: justify; }
        
        .juridico-doc h2 { font-size: 12pt; font-weight: bold; text-align: center; margin: 30px 0 15px 0; text-transform: uppercase; border-bottom: 1px solid #000; padding-bottom: 2px;}
        .juridico-doc h3 { font-size: 12pt; font-weight: bold; font-style: italic; margin-top: 20px; margin-bottom: 10px; }
        .juridico-doc p { text-indent: 2.5cm; margin-bottom: 10px; }
        
        .artigo { font-weight: bold; }

        /* Tabelas Oficiais */
        .tabela-legal { width: 100%; border-collapse: collapse; margin: 15px 0; font-size: 10pt; page-break-inside: avoid; }
        .tabela-legal th, .tabela-legal td { border: 1px solid #000; padding: 5px; text-align: center; }
        .tabela-legal th { background-color: #f3f3f3; font-weight: bold; text-align: left; padding-left: 10px; }
        .tabela-legal td:first-child { text-align: left; padding-left: 10px; }
        .tabela-legal td:last-child { width: 80px; font-weight: bold; text-align: center; }

        /* Fórmula Box */
        .formula-box {
            text-align: center; font-weight: bold; background: #fdfdfd; border: 1px solid #000;
            padding: 10px; margin: 15px 1.5cm; font-family: 'Courier New', monospace; font-size: 11pt;
        }

        /* IMPRESSÃO */
        @media print {
            body * { visibility: hidden; }
            #modal-minuta, #modal-minuta * { visibility: visible; }
            #modal-minuta { position: absolute; left: 0; top: 0; width: 100%; margin: 0; padding: 0; background: white; }
            .juridico-doc { width: 100%; max-width: none; padding: 0; box-shadow: none; margin: 0; }
            .no-print { display: none !important; }
        }
    </style>
</head>
<body class="pb-16">

    <nav class="bg-slate-900 text-white sticky top-0 z-50 shadow-md border-b-4 border-indigo-500">
        <div class="container mx-auto px-4 py-3 flex flex-col md:flex-row justify-between items-center gap-4">
            <div class="flex items-center gap-3">
                <div class="bg-indigo-600 p-2 rounded shadow">
                    <i data-lucide="scale" class="w-6 h-6 text-white"></i>
                </div>
                <div>
                    <h1 class="font-bold text-lg leading-tight">ORBIS TRIB  - Gestão tributária</h1>
                    <p class="text-[10px] text-slate-400 uppercase tracking-widest">LC 07/2006</p>
                </div>
            </div>
            
            <div class="flex flex-col md:flex-row gap-3 items-center">
                <!-- BLOCO CONFIG UFM + BASE -->
                <div class="flex gap-4 bg-white/10 p-2 rounded-lg border border-white/20 shadow-inner">
                    <div class="text-center">
                        <label class="block text-[9px] uppercase font-bold text-emerald-300">Valor UFM (R$)</label>
                        <input type="number" id="cfg-ufm" value="4.35" step="0.01" class="w-20 bg-transparent text-center font-bold text-white text-lg outline-none border-b border-emerald-500 input-focus" oninput="calcular()">
                    </div>
                    <div class="w-px bg-white/20"></div>
                    <div class="text-center">
                        <label class="block text-[9px] uppercase font-bold text-blue-300">Base Terreno (UFM)</label>
                        <input type="number" id="cfg-base-ufm" value="75.58" step="0.10" class="w-24 bg-transparent text-center font-bold text-white text-lg outline-none border-b border-blue-500 input-focus" oninput="calcular()">
                    </div>
                </div>

                <!-- ✅ TOGGLE VUC MODELO -->
                <div class="flex items-center gap-3 bg-white/10 p-2 rounded-lg border border-white/20 shadow-inner">
                    <div class="text-left leading-tight">
                        <div class="text-[9px] uppercase font-bold text-slate-300 tracking-widest">Modelo do VUC</div>
                        <div id="vuc-model-label" class="text-[10px] font-bold text-white">
                            1 - Modelo Seguindo o Código Tributário
                        </div>
                    </div>

                    <div class="flex items-center gap-2">
                        <span class="text-[9px] font-bold text-slate-300 uppercase">1</span>
                        <div class="relative inline-block w-10 h-5 align-middle select-none">
                            <input
                                type="checkbox"
                                id="toggle-vuc-model"
                                class="toggle-checkbox absolute block w-5 h-5 rounded-full bg-white border-4 appearance-none cursor-pointer border-slate-300 transition-all duration-300"
                                onclick="toggleVucModel()"
                            />
                            <label for="toggle-vuc-model" class="toggle-label block overflow-hidden h-5 rounded-full bg-slate-300 cursor-pointer transition-colors duration-300"></label>
                        </div>
                        <span class="text-[9px] font-bold text-slate-300 uppercase">2</span>
                    </div>
                </div>
            </div>

        </div>
    </nav>

    <div class="container mx-auto px-4 py-8 grid grid-cols-1 lg:grid-cols-12 gap-6">
        
        <div class="lg:col-span-7 space-y-5">

            <div class="bg-white rounded-xl shadow border border-slate-200 overflow-hidden">
                <div class="bg-indigo-50 p-3 border-b border-indigo-100 flex justify-between items-center">
                    <div class="flex items-center gap-2">
                        <i data-lucide="map" class="w-5 h-5 text-indigo-700"></i>
                        <h2 class="font-bold text-indigo-900 text-sm uppercase">1. Dados do Terreno (VVT)</h2>
                    </div>
                    <div class="flex items-center gap-2 bg-white px-3 py-1 rounded-full border border-indigo-200">
                        <span class="text-[10px] font-bold text-slate-500 uppercase">Gleba?</span>
                        <div class="relative inline-block w-8 h-4 align-middle select-none">
                            <input type="checkbox" id="toggle-gleba" class="toggle-checkbox absolute block w-4 h-4 rounded-full bg-white border-4 appearance-none cursor-pointer border-slate-300 transition-all duration-300" onclick="toggleGleba()"/>
                            <label for="toggle-gleba" class="toggle-label block overflow-hidden h-4 rounded-full bg-slate-300 cursor-pointer transition-colors duration-300"></label>
                        </div>
                    </div>
                </div>
                
                <div class="p-5 grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="md:col-span-2">
                        <label class="block text-[10px] font-bold text-slate-500 uppercase mb-1">Área Total (A<sub>t</sub>)</label>
                        <div class="relative">
                            <input type="number" id="in-at" class="w-full text-lg font-bold p-2 border border-slate-300 rounded outline-none input-focus text-slate-700" placeholder="0.00" oninput="calcular()">
                            <span class="absolute right-3 top-2.5 text-xs font-bold text-slate-400">m²</span>
                        </div>
                    </div>

                    <div id="gleba-panel" class="md:col-span-2 grid grid-cols-2 gap-3 bg-indigo-50 p-3 rounded border border-indigo-100 hidden">
                        <div class="col-span-2 text-[10px] uppercase font-bold text-indigo-700">
                             Fator Gleba (Art. 234)
                        </div>
                        <div>
                            <label class="block text-[9px] font-bold text-slate-500 uppercase mb-1">Testada</label>
                            <input type="number" id="in-testada" class="w-full p-1 border border-indigo-300 rounded text-sm" placeholder="Ex: 12.00" oninput="calcular()">
                        </div>
                        <div class="text-right pt-2">
                            <div class="text-[9px] text-slate-500">Profundidade: <span id="out-prof" class="font-bold">0m</span></div>
                            <div class="text-xs text-indigo-700 font-bold mt-1">A. Tributável: <span id="out-att">0,00</span> m²</div>
                        </div>
                    </div>

                    <div>
                        <label class="block text-[10px] font-bold text-slate-500 uppercase mb-1">Situação (K<sub>s</sub>)</label>
                        <select id="in-ks" class="w-full p-2 bg-slate-50 border rounded text-xs font-medium" onchange="calcular()">
                            <option value="1.20">Mais de uma frente (1.2)</option>
                            <option value="1.00">Condomínio Horizontal (1.0)</option>
                            <option value="1.00" selected>Uma frente (1.0)</option>
                            <option value="0.80">Aglomerado (0.8)</option>
                            <option value="0.80">Conjunto popular (0.8)</option>
                            <option value="0.80">Encravado (0.8)</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-[10px] font-bold text-slate-500 uppercase mb-1">Topografia (K<sub>d</sub>)</label>
                        <select id="in-kd" class="w-full p-2 bg-slate-50 border rounded text-xs font-medium" onchange="calcular()">
                            <option value="1.00" selected>Plano (1.0)</option>
                            <option value="0.90">Aclive (0.9)</option>
                            <option value="0.80">Irregular/Acidentado (0.8)</option>
                            <option value="0.90">Declive (0.9)</option>
                            <option value="0.80">Declive acentuado (0.8)</option>
                        </select>
                    </div>
                    <div class="md:col-span-2">
                        <label class="block text-[10px] font-bold text-slate-500 uppercase mb-1">Pedologia (K<sub>p</sub>)</label>
                        <select id="in-kp" class="w-full p-2 bg-slate-50 border rounded text-xs font-medium" onchange="calcular()">
                            <option value="1.00" selected>Firme (1.0)</option>
                            <option value="0.90">Arenoso (0.9)</option>
                            <option value="0.90">Inundável / terreno baixo (0.9)</option>
                            <option value="0.90">Rochoso/duna (0.9)</option>
                            <option value="0.80">Alagado/mangue (0.8)</option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-xl shadow border border-slate-200 overflow-hidden">
                <div class="bg-slate-50 p-3 border-b border-slate-200 flex items-center gap-2">
                    <i data-lucide="home" class="w-5 h-5 text-orange-600"></i>
                    <h2 class="font-bold text-slate-800 text-sm uppercase">2. Edificação (VVE)</h2>
                </div>
                <div class="p-5 grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="md:col-span-2">
                        <label class="block text-[10px] font-bold text-slate-500 uppercase mb-1">Área Construída (A<sub>c</sub>)</label>
                        <div class="relative">
                            <input type="number" id="in-ac" class="w-full text-lg font-bold p-2 border border-slate-300 rounded outline-none input-focus text-slate-700" placeholder="0.00" oninput="calcular()">
                            <span class="absolute right-3 top-2.5 text-xs font-bold text-slate-400">m²</span>
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-[10px] font-bold text-slate-500 uppercase mb-1">Tipo VUC (Base)</label>
                        <!-- ✅ ESTE SELECT É ATUALIZADO PELO TOGGLE -->
                        <select id="in-vuc" class="w-full p-2 bg-slate-50 border rounded text-xs font-bold text-slate-700" onchange="calcular()">
                            <!-- opções serão inseridas via JS para garantir 2 modelos sem quebrar nada -->
                        </select>
                    </div>

                    <div>
                        <label class="block text-[10px] font-bold text-slate-500 uppercase mb-1">Estrutura (K<sub>est</sub>)</label>
                        <select id="in-kest" class="w-full p-2 bg-slate-50 border rounded text-xs font-medium" onchange="calcular()">
                            <option value="1.00" selected>Alvenaria/concreto (1.0)</option>
                            <option value="1.00">Metálica (1.0)</option>
                            <option value="0.90">Mista (0.9)</option>
                            <option value="0.90">Fibrocimento ou /tijolos (0.9)</option>
                            <option value="0.80">Madeira (0.8)</option>
                        </select>
                    </div>

                    <div>
                        <label class="block text-[10px] font-bold text-slate-500 uppercase mb-1">Conservação (K<sub>c</sub>)</label>
                        <select id="in-kc" class="w-full p-2 bg-slate-50 border rounded text-xs font-medium" onchange="calcular()">
                            <option value="1.20">Ótima (1.2)</option>
                            <option value="1.10">Muito bom (1.1)</option>
                            <option value="1.00" selected>Boa / Normal (1.0)</option>
                            <option value="0.80">Regular (0.8)</option>
                            <option value="0.70">Inferior (0.7)</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-[10px] font-bold text-slate-500 uppercase mb-1">Idade (K<sub>i</sub>)</label>
                        <select id="in-ki" class="w-full p-2 bg-slate-50 border rounded text-xs font-medium" onchange="calcular()">
                            <option value="1.10">Até 10 anos (1.1)</option>
                            <option value="1.00" selected>De 11 a 20 anos (1.0)</option>
                            <option value="0.80">De 21 a 50 anos (0.8)</option>
                            <option value="0.60">Mais de 50 anos (0.6)</option>
                        </select>
                    </div>

                    <div class="md:col-span-2">
                        <label class="block text-[10px] font-bold text-slate-500 uppercase mb-1">Padrão (K<sub>pa</sub>)</label>
                        <select id="in-kpa" class="w-full p-2 bg-slate-50 border rounded text-xs font-medium" onchange="calcular()">
                            <option value="1.20">Alto (1.2)</option>
                            <option value="1.10">Muito bom (1.1)</option>
                            <option value="1.00" selected>Bom (1.0)</option>
                            <option value="0.90">Regular (0.9)</option>
                            <option value="0.70">Baixo (0.7)</option>
                            <option value="0.60">Popular (0.6)</option>
                        </select>
                    </div>
                </div>
            </div>

            <button onclick="gerarMinuta()" class="w-full bg-slate-800 hover:bg-slate-900 text-white font-bold py-4 rounded-xl shadow-lg transition-all flex items-center justify-center gap-3">
                <i data-lucide="file-text"></i>
                GERAR PROJETO DE LEI (MINUTA)
            </button>
        </div>

        <div class="lg:col-span-5 space-y-4">
            <div class="sticky top-24 bg-white rounded-xl shadow-xl border border-slate-200 overflow-hidden">
                <div class="bg-slate-900 p-6 text-center text-white">
                    <p class="text-[10px] uppercase tracking-widest text-slate-400 mb-1">Valor Venal Total Estimado</p>
                    <div id="res-total-reais" class="text-4xl md:text-5xl font-black text-emerald-400">R$ 0,00</div>
                    <div class="mt-2 inline-block bg-white/10 px-3 py-1 rounded-full text-xs font-mono text-slate-300">
                        <span id="res-total-ufm">0.00</span> UFM
                    </div>
                </div>

                <div class="p-6 space-y-6">
                    <div class="border-l-4 border-indigo-500 pl-4">
                        <div class="flex justify-between items-baseline mb-1">
                            <span class="font-bold text-slate-700 text-sm">Terreno</span>
                            <span id="res-vvt-reais" class="text-indigo-600 font-bold text-base">R$ 0,00</span>
                        </div>
                        <div class="bg-slate-50 p-2 rounded border border-slate-100 text-[10px] font-mono text-slate-600 leading-relaxed break-words">
                            <span id="log-vvt">...</span>
                        </div>
                    </div>

                    <div class="border-l-4 border-orange-500 pl-4">
                        <div class="flex justify-between items-baseline mb-1">
                            <span class="font-bold text-slate-700 text-sm">Edificação</span>
                            <span id="res-vve-reais" class="text-orange-600 font-bold text-base">R$ 0,00</span>
                        </div>
                        <div class="bg-slate-50 p-2 rounded border border-slate-100 text-[10px] font-mono text-slate-600 leading-relaxed break-words">
                            <span id="log-vve">...</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="modal-minuta" class="hidden fixed inset-0 bg-black/60 z-[100] flex justify-center items-start overflow-y-auto py-10 backdrop-blur-sm">
        <div class="bg-white w-full max-w-[21cm] shadow-2xl relative mb-10">
            
            <div class="no-print absolute top-4 right-4 flex gap-2">
                <button onclick="window.print()" class="bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded text-xs font-bold flex items-center gap-1 shadow">
                    <i data-lucide="printer" class="w-3 h-3"></i> IMPRIMIR
                </button>
                <button onclick="document.getElementById('modal-minuta').classList.add('hidden')" class="bg-slate-200 hover:bg-slate-300 text-slate-700 px-4 py-2 rounded text-xs font-bold shadow">
                    FECHAR
                </button>
            </div>

            <div id="conteudo-juridico" class="juridico-doc">
                </div>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
            if(typeof lucide !== 'undefined') lucide.createIcons();

            // ✅ aplica modelo padrão (1) ao carregar
            applyVucModel(1);

            calcular();
        });

        function toggleGleba() {
            const painel = document.getElementById('gleba-panel');
            const checkbox = document.getElementById('toggle-gleba');
            if(checkbox.checked) {
                painel.classList.remove('hidden');
                painel.classList.add('grid');
            } else {
                painel.classList.add('hidden');
                painel.classList.remove('grid');
                document.getElementById('in-testada').value = '';
            }
            calcular();
        }

        const getVal = (id) => parseFloat(document.getElementById(id).value.replace(',', '.')) || 0;
        const fmtMoney = (v) => v.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });
        const fmtNum = (v) => v.toLocaleString('pt-BR', { minimumFractionDigits: 2, maximumFractionDigits: 2 });

        // ✅ 2 modelos de VUC (mantém os mesmos rótulos, só muda os valores)
        const VUC_MODELS = {
            1: {
                title: "1 - Modelo Seguindo o Código Tributário",
                options: [
                    { label: "Alvenaria/Concreto", value: 80.00 },
                    { label: "Mista", value: 60.00 },
                    { label: "Madeira/Galpão", value: 45.00 },
                ]
            },
            2: {
                title: "2 - Modelo seguindo as amostras",
                options: [
                    { label: "Alvenaria/Concreto", value: 401.08 },
                    { label: "Mista", value: 300.81 },
                    { label: "Madeira/Galpão", value: 225.61 },
                ]
            }
        };

        function toggleVucModel() {
            const isModel2 = document.getElementById("toggle-vuc-model").checked;
            applyVucModel(isModel2 ? 2 : 1);
            calcular();
        }

        function applyVucModel(modelNum) {
            const sel = document.getElementById("in-vuc");
            const lbl = document.getElementById("vuc-model-label");
            const model = VUC_MODELS[modelNum] || VUC_MODELS[1];

            // preserva seleção por "tipo" (índice) quando alterna
            const oldIndex = Math.max(sel.selectedIndex, 0);

            sel.innerHTML = "";
            model.options.forEach((opt, idx) => {
                const o = document.createElement("option");
                o.value = String(opt.value.toFixed(2));
                o.textContent = `${opt.label} (${fmtNum(opt.value)})`;
                sel.appendChild(o);
            });

            // restaura índice se possível
            sel.selectedIndex = Math.min(oldIndex, sel.options.length - 1);

            // atualiza título visual do modelo
            lbl.textContent = model.title;

            // sincroniza toggle visual se chamarem applyVucModel direto
            document.getElementById("toggle-vuc-model").checked = (modelNum === 2);
        }

        function calcular() {
            // Globais
            const ufm = getVal('cfg-ufm');
            const baseUfm = getVal('cfg-base-ufm');

            // --- 1. TERRENO ---
            const at = getVal('in-at');
            const ks = getVal('in-ks');
            const kd = getVal('in-kd'); 
            const kp = getVal('in-kp'); 
            
            // Gleba
            const isGleba = document.getElementById('toggle-gleba').checked;
            const testada = getVal('in-testada');
            let att = at;
            let profundidade = 0;

            if (isGleba && at > 0 && testada > 0) {
                profundidade = at / testada;
                if (profundidade > 30) {
                    const areaPadrao = testada * 30; 
                    const excedente = at - areaPadrao;
                    att = areaPadrao + (excedente * 0.50); 
                }
            }

            document.getElementById('out-prof').textContent = fmtNum(profundidade) + "m";
            document.getElementById('out-att').textContent = fmtNum(att);

            // Fórmula Terreno
            const pontosTerreno = att * baseUfm * ks * kp * kd;
            const vvt = pontosTerreno * ufm;

            // --- 2. EDIFICAÇÃO ---
            const ac = getVal('in-ac');
            const vuc = getVal('in-vuc');
            const kest = getVal('in-kest');
            const kc = getVal('in-kc');
            const ki = getVal('in-ki');
            const kpa = getVal('in-kpa');

            // Fórmula Edificação
            const pontosEdificacao = ac * vuc * kest * kc * ki * kpa;
            const vve = pontosEdificacao * ufm;

            // --- TOTAIS ---
            const total = vvt + vve;
            const totalUfm = pontosTerreno + pontosEdificacao;

            // --- RENDERIZAR ---
            document.getElementById('res-total-reais').textContent = fmtMoney(total);
            document.getElementById('res-total-ufm').textContent = fmtNum(totalUfm);

            document.getElementById('res-vvt-reais').textContent = fmtMoney(vvt);
            document.getElementById('log-vvt').innerHTML = 
                `A<sub>t</sub>${fmtNum(att)} x Base ${fmtNum(baseUfm)} x K<sub>s</sub>${ks} x K<sub>d</sub>${kd} x K<sub>p</sub>${kp} = <strong>${fmtNum(pontosTerreno)}</strong>`;

            document.getElementById('res-vve-reais').textContent = fmtMoney(vve);
            document.getElementById('log-vve').innerHTML = 
                `A<sub>c</sub>${fmtNum(ac)} x VUC ${vuc} x K<sub>est</sub>${fmtNum(kest)} x K<sub>c</sub>${kc} x K<sub>i</sub>${ki} x K<sub>pa</sub>${kpa} = <strong>${fmtNum(pontosEdificacao)}</strong>`;
        }

        function gerarMinuta() {
            calcular(); 
            const ano = 2026;
            const baseUfm = getVal('cfg-base-ufm');
            const urlBrasao = "https://upload.wikimedia.org/wikipedia/commons/b/b0/Brasao_Sao_Jose_do_Cerrito.png";

            const html = `
                <div class="juridico-header">
                    <img src="${urlBrasao}" alt="Brasão">
                    <h1>PREFEITURA MUNICIPAL DE SÃO JOSÉ DO CERRITO</h1>
                    <p>Gabinete do Prefeito</p>
                </div>

                <div class="ementa">
                    <strong>PROJETO DE LEI COMPLEMENTAR Nº ____/${ano}.</strong><br>
                    "Dispõe sobre a atualização da Planta Genérica de Valores (PGV), fixa a Unidade Fiscal Municipal (UFM), estabelece a metodologia de apuração do Valor Venal de imóveis urbanos para fins de lançamento do IPTU e ITBI, em consonância com a Lei Complementar nº 07/2006, e dá outras providências."
                </div>

                <p><strong>O PREFEITO DO MUNICÍPIO DE SÃO JOSÉ DO CERRITO</strong>, Estado de Santa Catarina, no uso de suas atribuições legais conferidas pela Lei Orgânica Municipal;</p>

                <p><strong>CONSIDERANDO</strong> a necessidade de atualizar a base de cálculo tributária para promover a Justiça Fiscal, observando os princípios da capacidade contributiva e da vedação ao confisco;</p>

                <p><strong>CONSIDERANDO</strong> o disposto nos Artigos 232 e 234 da Lei Complementar nº 07/2006;</p>

                <p><strong>FAZ SABER</strong> que a Câmara Municipal aprovou e ele sanciona a seguinte <strong>LEI COMPLEMENTAR:</strong></p>

                <h2>CAPÍTULO I - DOS VALORES DE REFERÊNCIA</h2>

                <p><span class="artigo">Art. 1º.</span> Fica autorizado o poder executivo e atualizar anualmente o valor da unidade fiscal municipal (UFM) por meio de decreto.</p>
                <p><span class="artigo">Art. 2º.</span> O Valor Base de Terreno (V<sub>b</sub>) padrão para a zona urbana é fixado em <strong>${fmtNum(baseUfm)} UFM</strong> por metro quadrado.</p>

                <h2>CAPÍTULO II - DA METODOLOGIA DE CÁLCULO</h2>

                <h3>Seção I - Do Valor Venal do Terreno (VVT)</h3>
                <p><span class="artigo">Art. 3º.</span> O VVT será apurado mediante a fórmula:</p>
                <div class="formula-box">
                    VVT = (A<sub>t</sub> &times; V<sub>b</sub> &times; K<sub>s</sub> &times; K<sub>p</sub> &times; K<sub>d</sub>) &times; Valor UFM
                </div>
                
                <p>§ 1º. Para terrenos com profundidade média superior a 30 metros, a Área Tributável (A<sub>t</sub>) será calculada conforme as regras de redução de Gleba (Art. 234 da LC 07/2006).</p>

                <h3>Seção II - Do Valor Venal da Edificação (VVE)</h3>
                <p><span class="artigo">Art. 4º.</span> O VVE será obtido pela fórmula:</p>
                <div class="formula-box">
                    VVE = (A<sub>c</sub> &times; VUC &times; K<sub>est</sub> &times; K<sub>c</sub> &times; K<sub>i</sub> &times; K<sub>pa</sub>) &times; Valor UFM
                </div>

                <h2>CAPÍTULO III - DISPOSIÇÕES FINAIS</h2>
                <p><span class="artigo">Art. 5º.</span> Esta Lei entra em vigor na data de sua publicação.</p>

                <div style="text-align: center; margin-top: 60px;">
                    São José do Cerrito, ${new Date().toLocaleDateString('pt-BR', { day: 'numeric', month: 'long', year: 'numeric' })}.
                    <br><br><br>
                    __________________________________________<br>
                    <strong>PREFEITO MUNICIPAL</strong>
                </div>
            `;
            
            document.getElementById('conteudo-juridico').innerHTML = html;
            document.getElementById('modal-minuta').classList.remove('hidden');
        }
    </script>
</body>
</html>
